# 可灵（Kling）AI API 文档

## 简介

可灵（Kling）是由快手推出的 AI 视频生成大模型，支持文生视频、图生视频、多图参考生视频等多种功能。本目录包含可灵 AI 的 API 文档，供开发者集成使用。

## 文档目录

| 文档 | 描述 |
| ---- | ---- |
| [text_to_video.md](./text_to_video.md) | 文生视频 API 文档 |
| [image_to_video.md](./image_to_video.md) | 图生视频 API 文档 |

## API 基础信息

### Base URL

- **官方 API**：`https://api.klingai.com`
- **第三方代理**（如需）：请参考具体服务商文档

### 认证方式

所有 API 请求需要在请求头中包含认证信息：

```http
Authorization: Bearer {YOUR_API_KEY}
Content-Type: application/json
```

### API Key 获取

1. 访问可灵 AI 开放平台：https://klingai.com
2. 注册并登录账号
3. 在开发者控制台创建应用
4. 获取 API Key

## 功能概览

| 功能类型 | 任务类型 | 端点 | 描述 |
| -------- | -------- | ---- | ---- |
| 文生视频 | text2video | `/v1/videos/text2video` | 根据文本描述生成视频 |
| 图生视频 | image2video | `/v1/videos/image2video` | 基于静态图片生成视频 |
| 多图参考生视频 | image2video | `/v1/videos/image2video` | 使用多张参考图片生成视频 |

## 模型列表

| 模型名称 | 模型 ID | 特点 |
| -------- | ------- | ---- |
| Kling v1.6 | `kling-v1-6` | 稳定版本，性价比高 |
| Kling v2 Master | `kling-v2-master` | 高质量版本 |
| Kling v2.1 | `kling-v2-1` | 最新版本 |
| Kling v2.1 Master | `kling-v2-1-master` | 最新高质量版本 |

## 生成模式

| 模式 | 代码 | 描述 |
| ---- | ---- | ---- |
| 标准模式 | `std` | 生成速度快，适合预览 |
| 高品质模式 | `pro` | 生成质量高，适合正式输出 |

## 通用参数

### 视频时长

| 值 | 描述 |
| -- | ---- |
| 5 | 5 秒视频 |
| 10 | 10 秒视频 |

### 宽高比

| 值 | 描述 |
| -- | ---- |
| `16:9` | 横屏（默认） |
| `9:16` | 竖屏 |
| `1:1` | 方形 |
| `3:2` | 3:2 比例 |
| `2:3` | 2:3 比例 |
| `3:4` | 3:4 比例 |
| `4:3` | 4:3 比例 |

## 任务生命周期

```
提交任务 → submitted → processing → completed/failed
```

### 任务状态

| 状态 | 描述 |
| ---- | ---- |
| `submitted` | 任务已提交，等待处理 |
| `processing` | 任务处理中 |
| `completed` | 任务完成 |
| `failed` | 任务失败 |

### 轮询建议

- 建议轮询间隔：5-10 秒
- 超时时间：建议设置为 10-15 分钟
- 最大重试次数：建议 3-5 次

## 错误处理

### HTTP 状态码

| 状态码 | 描述 | 处理建议 |
| ------ | ---- | -------- |
| 200 | 成功 | - |
| 400 | 请求参数错误 | 检查请求参数 |
| 401 | 认证失败 | 检查 API Key |
| 403 | 权限不足 | 检查账号权限 |
| 429 | 请求频率超限 | 降低请求频率 |
| 500 | 服务器错误 | 稍后重试 |

## 最佳实践

1. **提示词优化**
   - 使用清晰、具体的描述
   - 包含主体、动作、场景、风格等关键信息
   - 中英文均可，但建议保持一致

2. **图片选择**（图生视频）
   - 使用高分辨率、清晰的图片
   - 避免过度压缩的图片
   - 确保主体清晰可辨

3. **错误重试**
   - 对于 5xx 错误，建议使用指数退避策略重试
   - 对于 429 错误，需要降低请求频率

4. **资源管理**
   - 生成的视频 URL 可能有时效性，建议及时下载保存
   - 合理设置任务超时时间

## 计费说明

可灵 AI 的 API 按生成的视频时长计费，具体价格请参考官方定价页面。不同模型和模式的价格可能有所不同。

## 更新日志

- **2024-12**: 新增 Kling v2.1 系列模型
- **2024-10**: 新增多图参考生视频功能
- **2024-08**: 发布 Kling v2 系列模型

## 参考链接

- 可灵 AI 官网：https://klingai.com
- 快手开放平台：https://open.kuaishou.com

